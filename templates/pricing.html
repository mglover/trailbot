{% set title="Pricing Calculator" %}
{% extends 'layout.html' %}
{% block main %}

<h4>Components</h4>
{{ form.begin(components.table)|safe }}
{{ form.table(components.rows, components.cols)|safe }}
{{ form.submit("Update Components")|safe }}
{{ form.end()|safe }}
<hr/>
{{html}}
<h4>Products</h4>

<form method="GET" action="{{url_for('pricing.new')}}">
Add Product, Name: <input name="pnam"></form>
<input type="submit" value="Add">
</form>

{{ form.begin(pricing.table)|safe }}
{% for pnam, grp in pricing.groupBy("Product").items() %}
  <h4>{{pnam}}: {{grp.total()}}</h4>
  {{ form.table(grp.rows,pricing.cols, footer=grp.footer())|safe }}
  {{ form.submit("Update Products")|safe }}
{% endfor %}
{{ form.end()|safe }}
<hr/>

{% endblock %}